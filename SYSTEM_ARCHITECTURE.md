# ACSci Thunderstorm Alert System - Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    EXTERNAL SERVICES                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚  OpenWeatherMap API â”‚          â”‚   MongoDB Atlas      â”‚            â”‚
â”‚  â”‚  (Weather Data)     â”‚          â”‚   (Cloud Database)   â”‚            â”‚
â”‚  â”‚  15.15Â°N, 120.59Â°E  â”‚          â”‚   User Data Storage  â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚             â”‚                                 â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                                 â”‚
              â”‚                                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         BACKEND SERVER                                   â”‚
â”‚                      Node.js + Express.js                                â”‚
â”‚                       Port: 5001                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  GLOBAL STATE                                                     â”‚  â”‚
â”‚  â”‚  â€¢ currentAlertLevel: 'GREEN' | 'YELLOW' | 'ORANGE' | 'RED'     â”‚  â”‚
â”‚  â”‚  â€¢ eventLogs: []  (Alert history with timestamps)                â”‚  â”‚
â”‚  â”‚  â€¢ routineBriefingsEnabled: true                                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  CRON JOBS                                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  monitorWeather()  - Every 30 minutes (*/30 * * * *)       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ Fetch forecast from OpenWeatherMap                      â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ Call checkForRainInForecast(weatherData)                â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ Compare newAlertLevel with currentAlertLevel            â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ If changed:                                              â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   â”œâ”€ logAlertEvent(level, message, 'Automatic')          â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   â”œâ”€ broadcastAlertLevel(alertInfo)                      â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   â””â”€ Update currentAlertLevel                            â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€ If unchanged: Log "Alert level unchanged"               â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  CORE FUNCTIONS                                                   â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  checkForRainInForecast(weatherData)                       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Examines list[0] (next 3 hours)                         â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Searches for "thunderstorm" keyword                     â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Determines alert level:                                 â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - "heavy" or "extreme" â†’ RED                            â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - "moderate" â†’ ORANGE                                   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - Any thunderstorm â†’ YELLOW                             â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - None â†’ GREEN                                          â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Returns: { alertLevel, alertMessage, ... }              â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  broadcastAlertLevel(alertInfo)                            â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Fetches all users with push subscriptions               â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Creates styled notification payload:                    â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - Emoji: ğŸŸ¢ğŸŸ¡ğŸŸ ğŸ”´                                       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - Safety instructions                                   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - Vibration pattern                                     â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - requireInteraction flag                               â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Sends via web-push to each subscription                 â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Returns: { sent: count, failed: count }                 â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  logAlertEvent(alertLevel, message, triggeredBy)           â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Creates event object with timestamp                     â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Pushes to eventLogs array                               â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Limits to 100 most recent events                        â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Used for audit trail                                    â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  API ENDPOINTS                                                    â”‚  â”‚
â”‚  â”‚  â€¢ POST /register - Student registration                         â”‚  â”‚
â”‚  â”‚  â€¢ POST /login - Authentication                                  â”‚  â”‚
â”‚  â”‚  â€¢ POST /api/push-subscribe - Enable push notifications          â”‚  â”‚
â”‚  â”‚  â€¢ POST /api/push-unsubscribe - Disable push notifications       â”‚  â”‚
â”‚  â”‚  â€¢ GET  /api/alert-status - Public: Get current alert level      â”‚  â”‚
â”‚  â”‚  â€¢ POST /api/get-current-briefing - Manual weather update        â”‚  â”‚
â”‚  â”‚  â€¢ POST /api/admin/set-alert-level - Manual override (Admin)     â”‚  â”‚
â”‚  â”‚  â€¢ GET  /api/admin/event-logs - Get alert history (Admin)        â”‚  â”‚
â”‚  â”‚  â€¢ GET  /api/admin/students - List all students (Admin)          â”‚  â”‚
â”‚  â”‚  â€¢ POST /api/admin/force-weather-check - Manual check (Admin)    â”‚  â”‚
â”‚  â”‚  â€¢ POST /api/admin/toggle-briefings - Enable/disable (Admin)     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  PUSH NOTIFICATION SERVICE (web-push)                            â”‚  â”‚
â”‚  â”‚  â€¢ VAPID Keys configured                                         â”‚  â”‚
â”‚  â”‚  â€¢ Sends to all subscribed users                                 â”‚  â”‚
â”‚  â”‚  â€¢ Handles subscription errors (410/404)                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚ HTTP/WebSocket
                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FRONTEND APP                                     â”‚
â”‚                      React 18 + Tailwind CSS                             â”‚
â”‚                       Port: 3000                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ALERT CONTEXT (Global State)                                    â”‚  â”‚
â”‚  â”‚  â€¢ Polls /api/alert-status every 10 seconds                      â”‚  â”‚
â”‚  â”‚  â€¢ Stores: alertLevel, recentEvents, lastUpdate                  â”‚  â”‚
â”‚  â”‚  â€¢ Provides: getThemeColors(), fetchAlertStatus()                â”‚  â”‚
â”‚  â”‚  â€¢ Used by: WeatherDashboard, AdminPanel                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  COMPONENTS                                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  App.js (Main Container)                                   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Wraps everything in <AlertProvider>                     â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Handles login/logout state                              â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Routes: LoginRegister | WeatherDashboard | AdminPanel   â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  WeatherDashboard.js (Main User Interface)                 â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ PAGASA Alert Banner (top)                               â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - Shows current alert level with emoji                  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - Dynamic background color                              â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - Animated pulse for RED                                â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Header Section                                          â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - Welcome message                                       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - Location info (15.15, 120.59)                         â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - Last update timestamp                                 â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - "Get Update Now" button                               â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - Push notification controls                            â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Current Weather Display                                 â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - Temperature, condition, humidity, wind                â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ 5-Day Forecast (40 data points)                         â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Earth Nullschool Map                                    â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Service Worker Integration                              â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - Registers /service-worker.js                          â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - Listens for 'PLAY_ALARM' messages                     â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - Plays Web Audio API siren                             â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - Triggers Vibration API                                â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  AdminPanel.js (Admin Dashboard)                           â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ PAGASA Alert Control Panel                              â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - 4 buttons: Set GREEN/YELLOW/ORANGE/RED                â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - Current alert level display                           â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - Confirmation dialogs                                  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Event Logs Table                                        â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - Time, Alert Level, Message, Triggered By              â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - Color-coded badges                                    â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - Last 20 events                                        â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Student Management                                      â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - View all students                                     â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - Delete accounts                                       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Notification Controls                                   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - Test notifications                                    â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - Force weather check                                   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    - Toggle routine briefings                              â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ System Logs (real-time)                                 â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  LoginRegister.js                                          â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Student registration form                               â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Login form (username/LRN + password)                    â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  SERVICE WORKER (public/service-worker.js)                       â”‚  â”‚
â”‚  â”‚  â€¢ Registers in background                                       â”‚  â”‚
â”‚  â”‚  â€¢ Listens for push events                                       â”‚  â”‚
â”‚  â”‚  â€¢ Extracts alertLevel from notification data                    â”‚  â”‚
â”‚  â”‚  â€¢ Sends 'PLAY_ALARM' message to open tabs                       â”‚  â”‚
â”‚  â”‚  â€¢ Shows notification with proper styling                        â”‚  â”‚
â”‚  â”‚  â€¢ Handles notification clicks                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  THEME SYSTEM (getThemeColors)                                   â”‚  â”‚
â”‚  â”‚  GREEN:  bg-slate-900, text-gray-100, bg-green-600               â”‚  â”‚
â”‚  â”‚  YELLOW: bg-yellow-50, text-gray-900, bg-yellow-500              â”‚  â”‚
â”‚  â”‚  ORANGE: bg-orange-50, text-gray-900, bg-orange-500              â”‚  â”‚
â”‚  â”‚  RED:    bg-red-50,    text-gray-900, bg-red-600 (animated)      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ALARM SOUND SYSTEM (Web Audio API)                              â”‚  â”‚
â”‚  â”‚  YELLOW: 1.5s, 3 oscillations, 800-1200 Hz                       â”‚  â”‚
â”‚  â”‚  ORANGE: 2.0s, 4 oscillations, 700-1400 Hz                       â”‚  â”‚
â”‚  â”‚  RED:    3.0s, 6 oscillations, 600-1600 Hz                       â”‚  â”‚
â”‚  â”‚  â€¢ Siren-style frequency sweeps                                  â”‚  â”‚
â”‚  â”‚  â€¢ Volume envelope (fade in/out)                                 â”‚  â”‚
â”‚  â”‚  â€¢ Triggered by service worker message                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER DEVICES                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  Desktop/Laptopâ”‚  â”‚  Mobile (iOS)  â”‚  â”‚ Mobile (Android)â”‚           â”‚
â”‚  â”‚  Chrome/Arc    â”‚  â”‚  Safari/Chrome â”‚  â”‚ Chrome/Firefox  â”‚           â”‚
â”‚  â”‚  Firefox/Edge  â”‚  â”‚                â”‚  â”‚ Samsung Internetâ”‚           â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
â”‚  â”‚  âœ… Push       â”‚  â”‚  âœ… Push*      â”‚  â”‚  âœ… Push       â”‚           â”‚
â”‚  â”‚  âœ… Alarm      â”‚  â”‚  âœ… Alarm      â”‚  â”‚  âœ… Alarm      â”‚           â”‚
â”‚  â”‚  âŒ Vibration  â”‚  â”‚  âœ… Vibration  â”‚  â”‚  âœ… Vibration  â”‚           â”‚
â”‚  â”‚  âœ… Theme      â”‚  â”‚  âœ… Theme      â”‚  â”‚  âœ… Theme      â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                       *Add to Home Screen required                      â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                            DATA FLOW DIAGRAM
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

AUTOMATIC ALERT DETECTION (Every 30 Minutes)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Cron Job Trigger (*/30 * * * *)
          â”‚
          â–¼
2. monitorWeather() - Fetch from OpenWeatherMap
          â”‚
          â–¼
3. checkForRainInForecast(weatherData)
          â”‚
          â”œâ”€ Examine list[0] (next 3 hours)
          â”œâ”€ Search for "thunderstorm" keyword
          â”œâ”€ Check severity (heavy/extreme/moderate)
          â””â”€ Return: { alertLevel, alertMessage, ... }
          â”‚
          â–¼
4. Compare newAlertLevel with currentAlertLevel
          â”‚
          â”œâ”€ If SAME â†’ Log "Alert level unchanged" â†’ END
          â”‚
          â””â”€ If DIFFERENT â†’ Continue...
                    â”‚
                    â–¼
5. logAlertEvent(alertLevel, message, 'Automatic')
          â”‚
          â””â”€ Push to eventLogs array with timestamp
          â”‚
          â–¼
6. broadcastAlertLevel(alertInfo)
          â”‚
          â”œâ”€ Fetch all users with pushSubscription
          â”œâ”€ Create styled payload (emoji, safety, vibrate)
          â””â”€ Send via web-push to each user
          â”‚
          â–¼
7. Update currentAlertLevel = newAlertLevel
          â”‚
          â–¼
8. Service Worker receives push
          â”‚
          â”œâ”€ Show notification
          â””â”€ Send 'PLAY_ALARM' message to tabs
          â”‚
          â–¼
9. WeatherDashboard receives message
          â”‚
          â”œâ”€ Play alarm sound (Web Audio API)
          â”œâ”€ Trigger vibration (if supported)
          â””â”€ AlertContext polls status (10s)
          â”‚
          â–¼
10. Theme updates across all components
          â”‚
          â””â”€ Banner, background, buttons change color

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

MANUAL ADMIN OVERRIDE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Admin clicks alert level button in AdminPanel
          â”‚
          â–¼
2. Confirmation dialog: "Set alert level to [LEVEL]?"
          â”‚
          â–¼
3. POST /api/admin/set-alert-level
          â”‚
          â”œâ”€ Body: { alertLevel, message }
          â””â”€ Headers: Bearer [token]
          â”‚
          â–¼
4. Backend validates admin token
          â”‚
          â–¼
5. Update currentAlertLevel
          â”‚
          â–¼
6. logAlertEvent(alertLevel, message, 'Admin Override')
          â”‚
          â–¼
7. broadcastAlertLevel(alertInfo)
          â”‚
          â””â”€ Same process as automatic detection
          â”‚
          â–¼
8. Response: { success: true, currentAlertLevel, event }
          â”‚
          â–¼
9. Frontend calls fetchAlertStatus() and fetchEventLogs()
          â”‚
          â–¼
10. UI updates immediately with new alert level

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PUSH NOTIFICATION FLOW
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Backend                           Browser                        User
â”€â”€â”€â”€â”€â”€â”€â”€                          â”€â”€â”€â”€â”€â”€â”€                        â”€â”€â”€â”€

broadcastAlertLevel()
     â”‚
     â”œâ”€ Create payload:
     â”‚  {
     â”‚    title: "ğŸ”´ RED ALERT",
     â”‚    body: "SEVERE thunderstorm...",
     â”‚    data: { alertLevel: 'RED', ... },
     â”‚    vibrate: [500,200,500,200,500,200,500],
     â”‚    requireInteraction: true
     â”‚  }
     â”‚
     â–¼
web-push.sendNotification()
     â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶  Service Worker (push event)
                                       â”‚
                                       â”œâ”€ Parse payload
                                       â”œâ”€ Check alertLevel
                                       â”‚
                                       â”œâ”€ If YELLOW/ORANGE/RED:
                                       â”‚   â””â”€ Send message to tabs
                                       â”‚      { type: 'PLAY_ALARM', alertLevel }
                                       â”‚
                                       â””â”€ showNotification()
                                             â”‚
                                             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶  Notification appears
                                                                        â”‚
                                       WeatherDashboard â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                       (message listener)                â”‚
                                       â”‚                                 â”‚
                                       â”œâ”€ playAlarmSound(alertLevel)     â”‚
                                       â”‚   â””â”€ Web Audio API              â”‚
                                       â”‚      800-1600 Hz siren          â”‚
                                       â”‚                                 â”‚
                                       â”œâ”€ navigator.vibrate([...])       â”‚
                                       â”‚                                 â”‚
                                       â””â”€ AlertContext.fetchAlertStatus()â”‚
                                             â”‚                           â”‚
                                             â–¼                           â–¼
                                       Theme changes            User sees + hears
                                       Dashboard updates        Notification + Alarm

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

DATABASE SCHEMA (MongoDB)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Collection: users
{
  _id: ObjectId,
  username: String (unique),
  password: String (hashed),
  firstName: String,
  middleInitial: String,
  lastName: String,
  gradeLevel: String,  // "Grade 7" to "Grade 12"
  section: String,     // Grade-specific sections
  lrn: String,         // 12-digit Learner Reference Number
  sex: String,         // "Male" or "Female"
  city: String,        // "Angeles City"
  token: String,       // JWT token
  pushSubscription: {  // web-push subscription object
    endpoint: String,
    keys: {
      p256dh: String,
      auth: String
    }
  },
  createdAt: Date
}

In-Memory State (Backend):
- currentAlertLevel: String ('GREEN' | 'YELLOW' | 'ORANGE' | 'RED')
- eventLogs: Array [
    {
      id: Number,
      timestamp: Date,
      alertLevel: String,
      message: String,
      triggeredBy: String  // 'Automatic' | 'Admin Override'
    },
    ...
  ]
- routineBriefingsEnabled: Boolean

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                            KEY TECHNOLOGIES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Backend:
â€¢ Node.js 14+
â€¢ Express.js 4.18.2
â€¢ Mongoose (MongoDB ODM)
â€¢ web-push 3.6.7 (Push notifications)
â€¢ node-cron (Scheduled jobs)
â€¢ jsonwebtoken (Authentication)
â€¢ bcryptjs (Password hashing)

Frontend:
â€¢ React 18.2.0
â€¢ Tailwind CSS 3.3.6
â€¢ Axios (HTTP client)
â€¢ Web Audio API (Alarm sounds)
â€¢ Vibration API (Mobile vibration)
â€¢ Service Worker API (Background tasks)
â€¢ Push API (Push notifications)

Infrastructure:
â€¢ MongoDB Atlas (Cloud database)
â€¢ OpenWeatherMap API (Weather data)
â€¢ VAPID (Push notification auth)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                           SECURITY MEASURES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Authentication:
âœ“ JWT tokens with expiration
âœ“ Bcrypt password hashing (10 rounds)
âœ“ Admin-only routes protected with requireAdmin middleware
âœ“ Token validation on every protected endpoint

Push Notifications:
âœ“ VAPID keys (public/private key pair)
âœ“ Subscription validation before sending
âœ“ Invalid subscriptions automatically removed (410/404 errors)

Database:
âœ“ MongoDB Atlas with username/password auth
âœ“ IP whitelist for network security
âœ“ Connection string in .env (not committed to git)

Input Validation:
âœ“ Alert level must be GREEN/YELLOW/ORANGE/RED
âœ“ Required fields validated on registration
âœ“ LRN format validation (12 digits)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
